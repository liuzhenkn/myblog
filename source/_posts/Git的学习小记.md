---
title: Git的学习小记
tags:
- Git
- 版本控制工具
---

最近学习了Git的使用，觉得使用命令来管理自己的仓库及项目是十分方便的，所以就把最近学习的内容记录下来，希望对来看博客的同学有所帮助。

### 什么是Git

Git是目前世界上最先进的分布式版本控制工具。

<!-- more -->

#### Git的安装

由于我是用的是win10 64位的系统，所以直接在官网下载相应的安装包即可。Git
安装完成后，打开Git bush 我们要进行一些设置。
在命令行输入如下命令：

```
git config --global user.name "你的用户名"
git config --global user.email "你的邮箱地址"
```
注意的是，git config –global 参数表示此台计算机上的所有Git仓库都会使用这个配置，当然也可以重新指定不同的用户名和邮箱。

创建版本库

既然安装已经结束，那么接下来就是正式操作啦。
首先你要进入你要创建仓库的目录(使用 cd 路径名)。
![](/images/20151227/testgit1.png)
pwd命令查看当前目录
1.使用git init命令把这个目录变成Git可以管理的仓库。
![](/images/20151227/testgit2.png)
2.将文件添加到仓库中
在Git中，版本控制系统可以告诉你每次的改动。
我们现在testgit目录下新建一个文件readme.txt，内容为：11111111。
然后使用git add readme.txt命令添加到暂存区中。
![](/images/20151227/testgit3.png)
如果和图上一样没有任何提示，说明添加成功。
接下来我们要用git commit命令让Git将暂存区中的文件提交到仓库。
![](/images/20151227/testgit4.png)
这样readme.txt就已经提交了。
我们还可以使用git status命令查看是否还有文件未提交。
![](/images/20151227/testgit5.png)
说明没有未提交的文件。
接下来再让我们修改一下readme.txt，添加一行”22222222”。
我们要查看修改信息该使用什么命令呢？——git diff readme.txt
![](/images/20151227/testgit6.png)
由图我们可以看到，readme.txt内容从一行11111111改成两行，添加了一行22222222.
最后我们可以提交修改了：
![](/images/20151227/testgit7.png)
注意要先 git add 再 git commit。

### 版本回退

我们已经学会了修改文件，现在我继续对readme.txt文件进行修改，再增加一行内容为33333333333333，并将内容提交。
![](/images/20151227/testgit8.png)
那我们如何查看我们的历史纪录呢？
使用git log命令：
![](/images/20151227/testgit9.png)
git log命令显示从最近到最远的显示日志，我们可以看到最近三次提交，最近的一次是,增加内容为333333.上一次是添加内容222222，第一次默认.
那么我想回到上一个版本，该使用什么命令？

```
git reset --hard HEAD^(上上个版本就用HEAD^^,上100个版本就是HEAD~100)
```
![](/images/20151227/testgit10.png)
再用 cat命令查看一下文件的内容，发现已经会退到上个版本了。
![](/images/20151227/testgit11.png)
最后再用git log查看历史信息，发现已经没有”添加333333”的内容了，那么我们该如何再恢复那个版本呢？
使用 git reset –hard 版本号，不记得版本号需要使用git reflog命令获取版本号。
![](/images/20151227/testgit12.png)
最前面的就是版本号，我们使用 git reset –hard 6a100f2 来恢复。
![](/images/20151227/testgit13.png)
成功！
(突然发现我后面省略的截图好烂！不要打我，我下次改。)
接下来我们先来理解一些概念：
**工作区：**
工作区就是我们在电脑上看到的目录，以后新建的目录文件也都算是工作区。
**版本库(Repository):**
工作区中有一个隐藏目录.git，这个目录就是版本库。版本库中有很多东西，比如暂存区(stage),还有Git为我们自动创建了第一个分支master,以及指向master的一个指针HEAD。

### Git撤销修改和删除文件

**一、撤销修改**

首先我们先在readme.txt中添加一行44444444，用cat命令查看：
![](/images/20160104/1.png)
此时我们还没有提交，我们突然发现这次添加的内容有误，需要回到上个版本，此时我们有几种方法可以修改：
第一：如果我知道要删掉那些内容的话，直接手动更改去掉那些需要的文件，然后add添加到暂存区，最后commit掉。

第二：我可以按以前的方法直接恢复到上一个版本。使用 git reset –hard HEAD^

但是这次我们直接用撤销命令来完成，首先我们先看看当前状态：
![](/images/20160104/2.png)
我们发现Git告诉我们，git checkout – file 可以丢弃工作区的修改，我们就使用这个命令：
![](/images/20160104/3.png)
命令 git checkout –readme.txt 意思就是，把readme.txt文件在工作区做的修改全部撤销，这里有2种情况，如下：

>1.readme.txt自动修改后，还没有放到暂存区，使用 撤销修改就回到和版本库一模一样的状态。
2.另外一种是readme.txt已经放入暂存区了，接着又作了修改，撤销修改就回到添加暂存区后的状态。

对于第二种情况，我想我们继续做demo来看下，假如现在我对readme.txt添加一行 内容为55555555，我git add 增加到暂存区后，接着添加内容66666666，我想通过撤销命令让其回到暂存区后的状态。如下所示：
![](/images/20160104/4.png)
需要注意的是，git checkout – file 中的–不要漏掉，否则就变成创建新分支的命令了。

**二、删除文件**

我们先在testgit目录中添加一个test.txt文件，然后提交。
![](/images/20160104/5.png)
此时我们要删除这个文件，可以直接在文件目录中删除或者使用rm test.txt命令删除，再执行commit命令提交，就可以从版本库中删除此文件。

虽然只是学习了一些基本命令，有一些深入的还没有学习，没有总结，也有很多地方参考了别的博客，但是这样总结了一遍之后感觉自己印象更深刻了，也希望能对大家有所帮助。
